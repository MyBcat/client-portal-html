<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyBcat Client Portal</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* Hide restricted menu items by default */
        .nav-menu .internal-only,
        .nav-menu .admin-only,
        .nav-menu .csm-only,
        .nav-menu .supervisor-only,
        .nav-menu .financial-access,
        .nav-menu .user-management,
        .nav-menu .settings-access {
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <nav class="sidebar">
            <div class="logo">
                <h2>MyBcat Portal</h2>
            </div>
            <ul class="nav-menu">
                <li><a href="#dashboard" class="nav-link active" onclick="showSection('dashboard')">
                    <span class="icon">üìä</span> Dashboard
                </a></li>
                <li><a href="#calls" class="nav-link" onclick="showSection('calls')">
                    <span class="icon">üìû</span> Calls
                </a></li>
                <li><a href="#reports" class="nav-link" onclick="showSection('reports')">
                    <span class="icon">üìà</span> Reports
                </a></li>
                <li><a href="ai-metrics.html" class="nav-link">
                    <span class="icon">üéØ</span> AI Metrics
                </a></li>
                <li class="financial-access"><a href="#invoices" class="nav-link" onclick="showSection('invoices')">
                    <span class="icon">üí≥</span> Invoices
                </a></li>
                <li class="user-management"><a href="#users" class="nav-link" onclick="showSection('users')">
                    <span class="icon">üë•</span> Users
                </a></li>
                <li class="admin-only"><a href="#integrations" class="nav-link" onclick="showSection('integrations')">
                    <span class="icon">üîó</span> Integrations
                </a></li>
                <li class="internal-only"><a href="#analytics" class="nav-link" onclick="showSection('analytics')">
                    <span class="icon">üìä</span> Advanced Analytics
                </a></li>
                <li class="supervisor-only"><a href="#approvals" class="nav-link" onclick="showSection('approvals')">
                    <span class="icon">‚úÖ</span> Approvals
                </a></li>
                <li class="csm-only"><a href="#company-setup" class="nav-link" onclick="showSection('company-setup')">
                    <span class="icon">üè¢</span> Company Setup
                </a></li>
                <li class="csm-only"><a href="#automation" class="nav-link" onclick="showSection('automation')">
                    <span class="icon">ü§ñ</span> Automation
                </a></li>
                <li class="settings-access"><a href="#settings" class="nav-link" onclick="showSection('settings')">
                    <span class="icon">‚öôÔ∏è</span> Settings
                </a></li>
            </ul>
            <div class="user-info">
                <div class="user-avatar">JD</div>
                <div class="user-details">
                    <p class="user-name" id="user-name">John Doe</p>
                    <p class="user-role" id="user-role">Client Admin</p>
                </div>
                <button class="logout-btn" onclick="logout()">Logout</button>
                <button class="btn btn-outline" style="width: 100%; margin-top: 8px;" onclick="switchRole()">
                    üîÑ Switch Role
                </button>
            </div>
        </nav>

        <main class="main-content">
            <!-- Dashboard Section -->
            <section id="dashboard" class="content-section active">
                <header class="section-header">
                    <h1>Dashboard</h1>
                    <div class="header-filters">
                        <!-- Filter Checkboxes for Supervisor/Agent/Queue -->
                        <div class="filter-group">
                            <div class="filter-section">
                                <label class="filter-label">Clients:</label>
                                <div class="checkbox-group" id="client-filters">
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="all" checked> All Clients
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="cvc"> Classic Vision Care
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="limestone"> Limestone Eye Care
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="emerald"> Emerald Medical
                                    </label>
                                </div>
                            </div>
                            <div class="filter-section">
                                <label class="filter-label">Agents:</label>
                                <div class="checkbox-group" id="agent-filters">
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="all" checked> All Agents
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="sarah"> Sarah Johnson
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="mike"> Mike Chen
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="emma"> Emma Wilson
                                    </label>
                                </div>
                            </div>
                            <div class="filter-section">
                                <label class="filter-label">Queues:</label>
                                <div class="checkbox-group" id="queue-filters">
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="all" checked> All Queues
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="appointments"> Appointments
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="support"> Support
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" value="billing"> Billing
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="date-filter">
                            <select>
                                <option>Last 7 Days</option>
                                <option>Last 30 Days</option>
                                <option>Last Quarter</option>
                                <option>Custom Range</option>
                            </select>
                        </div>
                    </div>
                </header>

                <!-- Big Five Metrics with Time Horizons -->
                <div class="big-five-metrics">
                    <!-- Service Level / Answer Rate -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Service Level / Answer Rate</h3>
                            <button class="expand-btn" onclick="toggleSubmetrics(this)">‚ñº</button>
                        </div>
                        <div class="time-horizons">
                            <div class="horizon-metric">
                                <span class="horizon-label">YTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">92%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 92%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">QTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">89%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 89%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">MTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">94%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 94%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">WTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">91%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 91%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="submetrics" style="display: none;">
                            <div class="submetric-item">
                                <span>Calls Answered < 30s</span>
                                <span>85%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Abandoned Rate</span>
                                <span>3.2%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Average Wait Time</span>
                                <span>0:23</span>
                            </div>
                        </div>
                    </div>

                    <!-- Average Handle Time -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Average Handle Time</h3>
                            <button class="expand-btn" onclick="toggleSubmetrics(this)">‚ñº</button>
                        </div>
                        <div class="time-horizons">
                            <div class="horizon-metric">
                                <span class="horizon-label">YTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">4:32</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 75%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">QTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">4:45</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 70%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">MTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">4:15</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 82%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">WTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">4:28</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 77%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="submetrics" style="display: none;">
                            <div class="submetric-item">
                                <span>Talk Time</span>
                                <span>3:45</span>
                            </div>
                            <div class="submetric-item">
                                <span>After Call Work</span>
                                <span>0:47</span>
                            </div>
                            <div class="submetric-item">
                                <span>Hold Time</span>
                                <span>0:12</span>
                            </div>
                        </div>
                    </div>

                    <!-- Quality Score -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Quality Score</h3>
                            <button class="expand-btn" onclick="toggleSubmetrics(this)">‚ñº</button>
                        </div>
                        <div class="time-horizons">
                            <div class="horizon-metric">
                                <span class="horizon-label">YTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">88%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 88%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">QTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">86%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 86%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">MTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">90%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 90%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">WTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">92%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 92%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="submetrics" style="display: none;">
                            <div class="submetric-item">
                                <span>Call Monitoring Score</span>
                                <span>91%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Customer Feedback Score</span>
                                <span>89%</span>
                            </div>
                            <div class="submetric-item">
                                <span>First Call Resolution</span>
                                <span>78%</span>
                            </div>
                        </div>
                    </div>

                    <!-- SOP Score -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>SOP Adherence</h3>
                            <button class="expand-btn" onclick="toggleSubmetrics(this)">‚ñº</button>
                        </div>
                        <div class="time-horizons">
                            <div class="horizon-metric">
                                <span class="horizon-label">YTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">85%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 85%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">QTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">83%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 83%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">MTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">87%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 87%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">WTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">89%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 89%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="submetrics" style="display: none;">
                            <div class="submetric-item">
                                <span>Greeting Compliance</span>
                                <span>95%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Information Verification</span>
                                <span>88%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Closing Protocol</span>
                                <span>92%</span>
                            </div>
                        </div>
                    </div>

                    <!-- Appointment Conversion -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>Appointment Conversion</h3>
                            <button class="expand-btn" onclick="toggleSubmetrics(this)">‚ñº</button>
                        </div>
                        <div class="time-horizons">
                            <div class="horizon-metric">
                                <span class="horizon-label">YTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">72%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 72%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">QTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">75%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 75%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">MTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">78%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 78%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">WTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">81%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 81%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="submetrics" style="display: none;">
                            <div class="submetric-item">
                                <span>Total Appointments</span>
                                <span>342</span>
                            </div>
                            <div class="submetric-item">
                                <span>Average per Call</span>
                                <span>1.3</span>
                            </div>
                            <div class="submetric-item">
                                <span>Booked Same Day</span>
                                <span>23%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Booked This Week</span>
                                <span>45%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Booked Next Week</span>
                                <span>32%</span>
                            </div>
                            <div class="submetric-header">Top Reasons for Not Booking:</div>
                            <div class="submetric-item">
                                <span>Insurance Not Accepted</span>
                                <span>28%</span>
                            </div>
                            <div class="submetric-item">
                                <span>No Available Times</span>
                                <span>24%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Patient Will Call Back</span>
                                <span>18%</span>
                            </div>
                        </div>
                    </div>

                    <!-- WOW Score -->
                    <div class="metric-card">
                        <div class="metric-header">
                            <h3>WOW Score</h3>
                            <button class="expand-btn" onclick="toggleSubmetrics(this)">‚ñº</button>
                        </div>
                        <div class="time-horizons">
                            <div class="horizon-metric">
                                <span class="horizon-label">YTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">86%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 86%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">QTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">84%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill warning" style="width: 84%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">MTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">88%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 88%"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="horizon-metric">
                                <span class="horizon-label">WTD</span>
                                <div class="gauge-container">
                                    <div class="gauge-value">90%</div>
                                    <div class="gauge-bar">
                                        <div class="gauge-fill success" style="width: 90%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="submetrics" style="display: none;">
                            <div class="submetric-item">
                                <span>Empathy Score</span>
                                <span>92%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Active Listening</span>
                                <span>89%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Problem Solving</span>
                                <span>85%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Professionalism</span>
                                <span>94%</span>
                            </div>
                            <div class="submetric-item">
                                <span>Enthusiasm</span>
                                <span>87%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Dashboard Charts (Optional) -->
                <div class="dashboard-grid">
                    <div class="chart-card">
                        <h3>Call Volume Trends</h3>
                        <div class="chart-placeholder">
                            <div class="chart-bar" style="height: 60%"></div>
                            <div class="chart-bar" style="height: 80%"></div>
                            <div class="chart-bar" style="height: 70%"></div>
                            <div class="chart-bar" style="height: 90%"></div>
                            <div class="chart-bar" style="height: 85%"></div>
                            <div class="chart-bar" style="height: 75%"></div>
                            <div class="chart-bar" style="height: 95%"></div>
                        </div>
                    </div>
                    <div class="chart-card">
                        <h3>Agent Performance</h3>
                        <table class="simple-table">
                            <thead>
                                <tr>
                                    <th>Agent</th>
                                    <th>Calls</th>
                                    <th>Avg Time</th>
                                    <th>Score</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Sarah Johnson</td>
                                    <td>124</td>
                                    <td>3:45</td>
                                    <td><span class="badge success">94%</span></td>
                                </tr>
                                <tr>
                                    <td>Mike Chen</td>
                                    <td>118</td>
                                    <td>4:12</td>
                                    <td><span class="badge success">91%</span></td>
                                </tr>
                                <tr>
                                    <td>Emma Wilson</td>
                                    <td>132</td>
                                    <td>3:58</td>
                                    <td><span class="badge warning">87%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- Calls Section -->
            <section id="calls" class="content-section">
                <header class="section-header">
                    <h1 id="calls-title">Call Management</h1>
                    <div class="header-actions">
                        <input type="search" placeholder="Search calls..." class="search-input">
                        <button class="btn btn-secondary">Export</button>
                    </div>
                </header>

                <div class="filters-bar">
                    <select class="filter-select" id="agent-filter">
                        <option>All Agents</option>
                        <option>Sarah Johnson</option>
                        <option>Mike Chen</option>
                    </select>
                    <select class="filter-select">
                        <option>All Outcomes</option>
                        <option>Appointment Booked</option>
                        <option>Left Voicemail</option>
                        <option>No Answer</option>
                    </select>
                    <input type="date" class="filter-date">
                    <input type="date" class="filter-date">
                </div>

                <div class="calls-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Date/Time</th>
                                <th>Phone Number</th>
                                <th class="agent-column">Agent</th>
                                <th>Duration</th>
                                <th>Outcome</th>
                                <th>SOP Score</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="all-calls">
                            <tr>
                                <td>2025-01-11 10:45 AM</td>
                                <td>(555) 123-4567</td>
                                <td>Sarah Johnson</td>
                                <td>5:23</td>
                                <td><span class="badge success">Appointment Booked</span></td>
                                <td><span class="score high">92%</span></td>
                                <td>
                                    <button class="btn-icon" title="Play Recording">‚ñ∂Ô∏è</button>
                                    <button class="btn-icon" title="View Transcript" onclick="showTranscript('1247', 'Sarah Johnson', '2025-01-11 10:45 AM', 'Appointment Booked')">üìÑ</button>
                                    <button class="btn-icon" title="Download">‚¨áÔ∏è</button>
                                    <button class="btn-icon" title="Create Ticket" onclick="createSupportTicket('1247')">üé´</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-01-11 10:32 AM</td>
                                <td>(555) 987-6543</td>
                                <td>Mike Chen</td>
                                <td>3:45</td>
                                <td><span class="badge warning">Left Voicemail</span></td>
                                <td><span class="score medium">78%</span></td>
                                <td>
                                    <button class="btn-icon" title="Play Recording">‚ñ∂Ô∏è</button>
                                    <button class="btn-icon" title="View Transcript" onclick="showTranscript('1246', 'Mike Chen', '2025-01-11 10:32 AM', 'Left Voicemail')">üìÑ</button>
                                    <button class="btn-icon" title="Download">‚¨áÔ∏è</button>
                                    <button class="btn-icon" title="Create Ticket" onclick="createSupportTicket('1246')">üé´</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-01-11 10:15 AM</td>
                                <td>(555) 456-7890</td>
                                <td>Emma Wilson</td>
                                <td>7:12</td>
                                <td><span class="badge success">Appointment Booked</span></td>
                                <td><span class="score high">95%</span></td>
                                <td>
                                    <button class="btn-icon" title="Play Recording">‚ñ∂Ô∏è</button>
                                    <button class="btn-icon" title="View Transcript" onclick="showTranscript('1245', 'Emma Wilson', '2025-01-11 10:15 AM', 'Appointment Booked')">üìÑ</button>
                                    <button class="btn-icon" title="Download">‚¨áÔ∏è</button>
                                    <button class="btn-icon" title="Create Ticket" onclick="createSupportTicket('1245')">üé´</button>
                                </td>
                            </tr>
                        </tbody>
                        <tbody id="agent-calls" style="display: none;">
                            <!-- Agent's own calls only -->
                            <tr>
                                <td>2025-01-11 10:15 AM</td>
                                <td>(555) 456-7890</td>
                                <td>Emma Wilson</td>
                                <td>7:12</td>
                                <td><span class="badge success">Appointment Booked</span></td>
                                <td><span class="score high">95%</span></td>
                                <td>
                                    <button class="btn-icon" title="Play Recording">‚ñ∂Ô∏è</button>
                                    <button class="btn-icon" title="View Transcript" onclick="showTranscript('1245', 'Emma Wilson', '2025-01-11 10:15 AM', 'Appointment Booked')">üìÑ</button>
                                    <button class="btn-icon" title="Download">‚¨áÔ∏è</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-01-11 09:45 AM</td>
                                <td>(555) 111-2222</td>
                                <td>Emma Wilson</td>
                                <td>4:33</td>
                                <td><span class="badge warning">Left Voicemail</span></td>
                                <td><span class="score medium">82%</span></td>
                                <td>
                                    <button class="btn-icon" title="Play Recording">‚ñ∂Ô∏è</button>
                                    <button class="btn-icon" title="View Transcript">üìÑ</button>
                                    <button class="btn-icon" title="Download">‚¨áÔ∏è</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2025-01-11 08:30 AM</td>
                                <td>(555) 333-4444</td>
                                <td>Emma Wilson</td>
                                <td>6:15</td>
                                <td><span class="badge success">Appointment Booked</span></td>
                                <td><span class="score high">91%</span></td>
                                <td>
                                    <button class="btn-icon" title="Play Recording">‚ñ∂Ô∏è</button>
                                    <button class="btn-icon" title="View Transcript">üìÑ</button>
                                    <button class="btn-icon" title="Download">‚¨áÔ∏è</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Call Player Modal (Hidden by default) -->
                <div class="modal" id="call-player">
                    <div class="modal-content">
                        <h3>Call Recording</h3>
                        <audio controls class="audio-player">
                            <source src="#" type="audio/mpeg">
                        </audio>
                        <div class="transcript-box">
                            <h4>Transcript</h4>
                            <div class="transcript-content">
                                <p><strong>Agent:</strong> Good morning, thank you for calling MyBcat. How can I help you today?</p>
                                <p><strong>Customer:</strong> Hi, I need to schedule an appointment for next week.</p>
                                <p><strong>Agent:</strong> I'd be happy to help you with that. What day works best for you?</p>
                            </div>
                        </div>
                        <div class="ai-scores">
                            <div class="score-item">
                                <span>WOW Score:</span> <strong>92%</strong>
                            </div>
                            <div class="score-item">
                                <span>SOP Adherence:</span> <strong>88%</strong>
                            </div>
                            <div class="score-item">
                                <span>Appointment Success:</span> <strong>Yes</strong>
                            </div>
                        </div>
                        <button class="btn btn-secondary" onclick="closeModal()">Close</button>
                    </div>
                </div>
            </section>

            <!-- Reports Section -->
            <section id="reports" class="content-section">
                <header class="section-header">
                    <h1>Reports & Analytics</h1>
                    <div class="header-actions">
                        <button class="btn btn-primary">Schedule Report</button>
                        <button class="btn btn-secondary">Export All</button>
                    </div>
                </header>

                <div class="report-cards">
                    <div class="report-card">
                        <h3>Daily Summary</h3>
                        <p>Complete overview of today's performance</p>
                        <button class="btn btn-outline">View Report</button>
                    </div>
                    <div class="report-card">
                        <h3>Weekly Analytics</h3>
                        <p>Detailed weekly performance metrics</p>
                        <button class="btn btn-outline">View Report</button>
                    </div>
                    <div class="report-card">
                        <h3>Monthly Trends</h3>
                        <p>Month-over-month comparison</p>
                        <button class="btn btn-outline">View Report</button>
                    </div>
                    <div class="report-card">
                        <h3>Agent Performance</h3>
                        <p>Individual agent scorecards</p>
                        <button class="btn btn-outline">View Report</button>
                    </div>
                </div>

                <div class="analytics-section">
                    <h3>Quick Analytics</h3>
                    <div class="analytics-grid">
                        <div class="analytics-card">
                            <h4>Peak Hours Analysis</h4>
                            <div class="mini-chart">
                                <div class="hour-bar" style="height: 40%">8am</div>
                                <div class="hour-bar" style="height: 60%">9am</div>
                                <div class="hour-bar" style="height: 90%">10am</div>
                                <div class="hour-bar" style="height: 100%">11am</div>
                                <div class="hour-bar" style="height: 85%">12pm</div>
                                <div class="hour-bar" style="height: 70%">1pm</div>
                                <div class="hour-bar" style="height: 80%">2pm</div>
                                <div class="hour-bar" style="height: 75%">3pm</div>
                            </div>
                        </div>
                        <div class="analytics-card">
                            <h4>Service Level by Day</h4>
                            <table class="simple-table">
                                <tr>
                                    <td>Monday</td>
                                    <td><span class="badge success">94%</span></td>
                                </tr>
                                <tr>
                                    <td>Tuesday</td>
                                    <td><span class="badge success">91%</span></td>
                                </tr>
                                <tr>
                                    <td>Wednesday</td>
                                    <td><span class="badge warning">87%</span></td>
                                </tr>
                                <tr>
                                    <td>Thursday</td>
                                    <td><span class="badge success">92%</span></td>
                                </tr>
                                <tr>
                                    <td>Friday</td>
                                    <td><span class="badge success">90%</span></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Invoices Section -->
            <section id="invoices" class="content-section">
                <header class="section-header">
                    <h1 id="billing-title">Billing & Invoices</h1>
                    <div class="account-summary" id="client-billing-summary">
                        <span>Current Balance: <strong>$2,450.00</strong></span>
                        <span class="text-warning">Next Payment Due: Jan 15, 2025</span>
                    </div>
                    <div class="account-summary" id="admin-billing-summary" style="display: none;">
                        <span>Total Revenue This Month: <strong>$148,250.00</strong></span>
                        <span class="text-success">Active Clients: 42</span>
                        <span class="text-warning">3 Overdue Accounts</span>
                    </div>
                </header>

                <!-- Client View -->
                <div class="billing-overview" id="client-billing-view">
                    <div class="billing-card">
                        <h3>Account Summary</h3>
                        <div class="billing-details">
                            <div class="billing-row">
                                <span>Current Balance:</span>
                                <strong>$2,450.00</strong>
                            </div>
                            <div class="billing-row">
                                <span>Last Payment:</span>
                                <strong>$2,450.00 on Dec 15, 2024</strong>
                            </div>
                            <div class="billing-row">
                                <span>Credit Available:</span>
                                <strong>$0.00</strong>
                            </div>
                            <div class="billing-row">
                                <span>Payment Method:</span>
                                <strong>ACH Transfer</strong>
                            </div>
                        </div>
                    </div>
                    <div class="billing-card">
                        <h3>Aging Report</h3>
                        <div class="aging-details">
                            <div class="aging-row">
                                <span>Current:</span>
                                <strong class="text-success">$2,450.00</strong>
                            </div>
                            <div class="aging-row">
                                <span>30 Days:</span>
                                <strong>$0.00</strong>
                            </div>
                            <div class="aging-row">
                                <span>60 Days:</span>
                                <strong>$0.00</strong>
                            </div>
                            <div class="aging-row">
                                <span>90+ Days:</span>
                                <strong>$0.00</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin/CSM Revenue Overview -->
                <div class="billing-overview" id="admin-billing-view" style="display: none;">
                    <div class="billing-card">
                        <h3>Revenue Metrics</h3>
                        <div class="billing-details">
                            <div class="billing-row">
                                <span>Monthly Recurring Revenue:</span>
                                <strong>$148,250.00</strong>
                            </div>
                            <div class="billing-row">
                                <span>Collections This Month:</span>
                                <strong>$142,800.00</strong>
                            </div>
                            <div class="billing-row">
                                <span>Outstanding Invoices:</span>
                                <strong class="text-warning">$5,450.00</strong>
                            </div>
                            <div class="billing-row">
                                <span>Average Client Value:</span>
                                <strong>$3,530.00</strong>
                            </div>
                        </div>
                    </div>
                    <div class="billing-card">
                        <h3>Payment Health</h3>
                        <div class="aging-details">
                            <div class="aging-row">
                                <span>Current (On Time):</span>
                                <strong class="text-success">38 clients (90.5%)</strong>
                            </div>
                            <div class="aging-row">
                                <span>30 Days Overdue:</span>
                                <strong class="text-warning">3 clients (7.1%)</strong>
                            </div>
                            <div class="aging-row">
                                <span>60 Days Overdue:</span>
                                <strong class="text-danger">1 client (2.4%)</strong>
                            </div>
                            <div class="aging-row">
                                <span>90+ Days Overdue:</span>
                                <strong>0 clients (0%)</strong>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Client Invoice List -->
                <div class="invoice-list" id="client-invoice-list">
                    <h3>Your Invoice History</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Invoice #</th>
                                <th>Date</th>
                                <th>Service Period</th>
                                <th>Amount</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>INV-2025-001</td>
                                <td>Jan 1, 2025</td>
                                <td>Jan 1 - Jan 31, 2025</td>
                                <td>$2,450.00</td>
                                <td><span class="badge warning">Pending</span></td>
                                <td>
                                    <button class="btn-icon" title="View">üëÅÔ∏è</button>
                                    <button class="btn-icon" title="Download PDF">‚¨áÔ∏è</button>
                                    <button class="btn-icon" title="Email">‚úâÔ∏è</button>
                                </td>
                            </tr>
                            <tr>
                                <td>INV-2024-012</td>
                                <td>Dec 1, 2024</td>
                                <td>Dec 1 - Dec 31, 2024</td>
                                <td>$2,450.00</td>
                                <td><span class="badge success">Paid</span></td>
                                <td>
                                    <button class="btn-icon" title="View">üëÅÔ∏è</button>
                                    <button class="btn-icon" title="Download PDF">‚¨áÔ∏è</button>
                                    <button class="btn-icon" title="Email">‚úâÔ∏è</button>
                                </td>
                            </tr>
                            <tr>
                                <td>INV-2024-011</td>
                                <td>Nov 1, 2024</td>
                                <td>Nov 1 - Nov 30, 2024</td>
                                <td>$2,450.00</td>
                                <td><span class="badge success">Paid</span></td>
                                <td>
                                    <button class="btn-icon" title="View">üëÅÔ∏è</button>
                                    <button class="btn-icon" title="Download PDF">‚¨áÔ∏è</button>
                                    <button class="btn-icon" title="Email">‚úâÔ∏è</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Admin/CSM Client Billing Overview -->
                <div class="invoice-list" id="admin-invoice-list" style="display: none;">
                    <h3>Client Billing Status</h3>
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Client Name</th>
                                <th>Monthly Rate</th>
                                <th>Last Payment</th>
                                <th>Outstanding</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>CVC</td>
                                <td>$4,200/mo</td>
                                <td>Jan 5, 2025</td>
                                <td>$0.00</td>
                                <td><span class="badge success">Current</span></td>
                                <td>
                                    <button class="btn-icon" title="View Account">üëÅÔ∏è</button>
                                    <button class="btn-icon" title="View Users">üë•</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Limestone</td>
                                <td>$2,800/mo</td>
                                <td>Dec 28, 2024</td>
                                <td>$0.00</td>
                                <td><span class="badge success">Current</span></td>
                                <td>
                                    <button class="btn-icon" title="View Account">üëÅÔ∏è</button>
                                    <button class="btn-icon" title="View Users">üë•</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Emerald</td>
                                <td>$6,500/mo</td>
                                <td>Nov 30, 2024</td>
                                <td class="text-warning">$6,500.00</td>
                                <td><span class="badge warning">30 Days Overdue</span></td>
                                <td>
                                    <button class="btn-icon" title="View Account">üëÅÔ∏è</button>
                                    <button class="btn-icon" title="Send Reminder">‚úâÔ∏è</button>
                                    <button class="btn-icon" title="Call">üìû</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Users Section -->
            <section id="users" class="content-section">
                <header class="section-header">
                    <h1 id="users-title">User Management</h1>
                    <button class="btn btn-primary" onclick="showAddUserModal()">Add User</button>
                </header>

                <!-- Client View: Their own users -->
                <div class="users-table-container" id="client-users-view">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Role</th>
                                <th>Status</th>
                                <th>Last Login</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>John Doe</td>
                                <td>john.doe@cvc.com</td>
                                <td>Client Admin</td>
                                <td><span class="badge success">Active</span></td>
                                <td>Jan 11, 2025 9:00 AM</td>
                                <td>
                                    <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Deactivate">üö´</button>
                                </td>
                            </tr>
                            <tr>
                                <td>Jane Smith</td>
                                <td>jane.smith@cvc.com</td>
                                <td>Client User</td>
                                <td><span class="badge success">Active</span></td>
                                <td>Jan 10, 2025 2:30 PM</td>
                                <td>
                                    <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Deactivate">üö´</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Admin/CSM View: Companies with expandable users -->
                <div class="companies-container" id="admin-companies-view" style="display: none;">
                    <style>
                        .company-row {
                            cursor: pointer;
                            transition: background 0.2s;
                        }
                        .company-row:hover {
                            background: var(--background);
                        }
                        .company-row.expanded {
                            background: #f0f9ff;
                        }
                        .expand-icon {
                            transition: transform 0.3s;
                            display: inline-block;
                            margin-right: 8px;
                        }
                        .company-row.expanded .expand-icon {
                            transform: rotate(90deg);
                        }
                        .user-details {
                            display: none;
                            background: white;
                            border: 1px solid var(--border-color);
                            border-radius: 8px;
                            margin: 12px 0;
                            padding: 16px;
                        }
                        .user-details.active {
                            display: block;
                        }
                        .company-stats {
                            display: flex;
                            gap: 24px;
                            font-size: 13px;
                            color: var(--text-secondary);
                        }
                    </style>
                    
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th style="width: 30px;"></th>
                                <th>Company Name</th>
                                <th>Users</th>
                                <th>Active Agents</th>
                                <th>Monthly Rate</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- CVC -->
                            <tr class="company-row" onclick="toggleCompanyDetails('cvc')">
                                <td><span class="expand-icon">‚ñ∂</span></td>
                                <td><strong>CVC</strong></td>
                                <td>8 users</td>
                                <td>5 agents</td>
                                <td>$4,200/mo</td>
                                <td><span class="badge success">Active</span></td>
                                <td>
                                    <button class="btn-icon" title="Edit Company" onclick="event.stopPropagation()">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Add User" onclick="event.stopPropagation()">‚ûï</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="7" style="padding: 0;">
                                    <div class="user-details" id="cvc-details">
                                        <div class="company-stats">
                                            <span><strong>Primary Contact:</strong> Dr. James Wilson</span>
                                            <span><strong>Phone:</strong> (555) 123-4567</span>
                                            <span><strong>Created:</strong> Oct 15, 2024</span>
                                        </div>
                                        <h4 style="margin-top: 16px;">Company Users</h4>
                                        <table class="data-table" style="margin-top: 12px;">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Email</th>
                                                    <th>Role</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Dr. James Wilson</td>
                                                    <td>james.wilson@cvc.com</td>
                                                    <td>Client Admin</td>
                                                    <td><span class="badge success">Active</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Reset Password">üîë</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Sarah Johnson</td>
                                                    <td>sarah.j@cvc.com</td>
                                                    <td>Client User</td>
                                                    <td><span class="badge success">Active</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Reset Password">üîë</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Mike Chen</td>
                                                    <td>mike.chen@cvc.com</td>
                                                    <td>Agent</td>
                                                    <td><span class="badge success">Active</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Reset Password">üîë</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Limestone -->
                            <tr class="company-row" onclick="toggleCompanyDetails('limestone')">
                                <td><span class="expand-icon">‚ñ∂</span></td>
                                <td><strong>Limestone</strong></td>
                                <td>5 users</td>
                                <td>3 agents</td>
                                <td>$2,800/mo</td>
                                <td><span class="badge success">Active</span></td>
                                <td>
                                    <button class="btn-icon" title="Edit Company" onclick="event.stopPropagation()">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Add User" onclick="event.stopPropagation()">‚ûï</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="7" style="padding: 0;">
                                    <div class="user-details" id="limestone-details">
                                        <div class="company-stats">
                                            <span><strong>Primary Contact:</strong> Lisa Martinez</span>
                                            <span><strong>Phone:</strong> (555) 234-5678</span>
                                            <span><strong>Created:</strong> Nov 5, 2024</span>
                                        </div>
                                        <h4 style="margin-top: 16px;">Company Users</h4>
                                        <table class="data-table" style="margin-top: 12px;">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Email</th>
                                                    <th>Role</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Lisa Martinez</td>
                                                    <td>lisa@limestone.com</td>
                                                    <td>Client Admin</td>
                                                    <td><span class="badge success">Active</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Reset Password">üîë</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Robert Brown</td>
                                                    <td>robert.b@limestone.com</td>
                                                    <td>Agent</td>
                                                    <td><span class="badge success">Active</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Reset Password">üîë</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                            
                            <!-- Emerald -->
                            <tr class="company-row" onclick="toggleCompanyDetails('emerald')">
                                <td><span class="expand-icon">‚ñ∂</span></td>
                                <td><strong>Emerald</strong></td>
                                <td>12 users</td>
                                <td>8 agents</td>
                                <td>$6,500/mo</td>
                                <td><span class="badge warning">Payment Due</span></td>
                                <td>
                                    <button class="btn-icon" title="Edit Company" onclick="event.stopPropagation()">‚úèÔ∏è</button>
                                    <button class="btn-icon" title="Add User" onclick="event.stopPropagation()">‚ûï</button>
                                </td>
                            </tr>
                            <tr>
                                <td colspan="7" style="padding: 0;">
                                    <div class="user-details" id="emerald-details">
                                        <div class="company-stats">
                                            <span><strong>Primary Contact:</strong> Thomas Green</span>
                                            <span><strong>Phone:</strong> (555) 345-6789</span>
                                            <span><strong>Created:</strong> Sep 20, 2024</span>
                                        </div>
                                        <h4 style="margin-top: 16px;">Company Users</h4>
                                        <table class="data-table" style="margin-top: 12px;">
                                            <thead>
                                                <tr>
                                                    <th>Name</th>
                                                    <th>Email</th>
                                                    <th>Role</th>
                                                    <th>Status</th>
                                                    <th>Actions</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>Thomas Green</td>
                                                    <td>thomas@emerald.com</td>
                                                    <td>Client Admin</td>
                                                    <td><span class="badge success">Active</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Reset Password">üîë</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Emily Davis</td>
                                                    <td>emily.d@emerald.com</td>
                                                    <td>Supervisor</td>
                                                    <td><span class="badge success">Active</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Reset Password">üîë</button>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>Alex Thompson</td>
                                                    <td>alex.t@emerald.com</td>
                                                    <td>Agent</td>
                                                    <td><span class="badge warning">Inactive</span></td>
                                                    <td>
                                                        <button class="btn-icon" title="Edit">‚úèÔ∏è</button>
                                                        <button class="btn-icon" title="Activate">‚úÖ</button>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- Company Setup Section (CSM Only) -->
            <section id="company-setup" class="content-section">
                <header class="section-header">
                    <h1>New Company Setup</h1>
                    <p class="section-subtitle">Complete this form to create a new client account</p>
                </header>

                <form class="company-form">
                    <div class="form-section">
                        <h3>Company Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Company Name *</label>
                                <input type="text" placeholder="Enter company name" required>
                            </div>
                            <div class="form-group">
                                <label>DBA (If Different)</label>
                                <input type="text" placeholder="Doing business as">
                            </div>
                            <div class="form-group">
                                <label>Primary Contact *</label>
                                <input type="text" placeholder="Contact name" required>
                            </div>
                            <div class="form-group">
                                <label>Email *</label>
                                <input type="email" placeholder="contact@company.com" required>
                            </div>
                            <div class="form-group">
                                <label>Phone *</label>
                                <input type="tel" placeholder="(555) 123-4567" required>
                            </div>
                            <div class="form-group">
                                <label>Timezone *</label>
                                <select required>
                                    <option>Eastern Time</option>
                                    <option>Central Time</option>
                                    <option>Mountain Time</option>
                                    <option>Pacific Time</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Service Configuration</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Preferred Area Code *</label>
                                <input type="text" placeholder="555" required>
                            </div>
                            <div class="form-group">
                                <label>Number of Agents *</label>
                                <input type="number" placeholder="5" required>
                            </div>
                            <div class="form-group full-width">
                                <label>Hours of Operation *</label>
                                <div class="hours-grid">
                                    <div class="hour-row">
                                        <span>Monday:</span>
                                        <input type="time" value="08:00">
                                        <span>to</span>
                                        <input type="time" value="17:00">
                                    </div>
                                    <div class="hour-row">
                                        <span>Tuesday:</span>
                                        <input type="time" value="08:00">
                                        <span>to</span>
                                        <input type="time" value="17:00">
                                    </div>
                                    <div class="hour-row">
                                        <span>Wednesday:</span>
                                        <input type="time" value="08:00">
                                        <span>to</span>
                                        <input type="time" value="17:00">
                                    </div>
                                    <div class="hour-row">
                                        <span>Thursday:</span>
                                        <input type="time" value="08:00">
                                        <span>to</span>
                                        <input type="time" value="17:00">
                                    </div>
                                    <div class="hour-row">
                                        <span>Friday:</span>
                                        <input type="time" value="08:00">
                                        <span>to</span>
                                        <input type="time" value="17:00">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Call Handling Preferences</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>After-Hours Handling *</label>
                                <select required>
                                    <option>Voicemail</option>
                                    <option>AI Voice Agent (Bland AI)</option>
                                    <option>Forward to On-Call</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Voicemail Greeting</label>
                                <textarea placeholder="Thank you for calling..."></textarea>
                            </div>
                            <div class="form-group">
                                <label>Service Level Target</label>
                                <input type="text" placeholder="80% in 30 seconds">
                            </div>
                            <div class="form-group">
                                <label>Call Routing Rules</label>
                                <textarea placeholder="Describe routing preferences"></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Billing Information</h3>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label>Billing Address *</label>
                                <input type="text" placeholder="Street address" required>
                            </div>
                            <div class="form-group">
                                <label>City *</label>
                                <input type="text" placeholder="City" required>
                            </div>
                            <div class="form-group">
                                <label>State *</label>
                                <input type="text" placeholder="State" required>
                            </div>
                            <div class="form-group">
                                <label>ZIP *</label>
                                <input type="text" placeholder="12345" required>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary">Cancel</button>
                        <button type="submit" class="btn btn-primary">Create Company & Notify Teams</button>
                    </div>
                </form>
            </section>

            <!-- Settings Section -->
            <section id="settings" class="content-section">
                <header class="section-header">
                    <h1>Settings</h1>
                </header>

                <div class="settings-tabs">
                    <button class="tab-btn active">General</button>
                    <button class="tab-btn">Notifications</button>
                    <button class="tab-btn">Security</button>
                    <button class="tab-btn">Integrations</button>
                </div>

                <div class="settings-content">
                    <div class="settings-group">
                        <h3>Company Information</h3>
                        <div class="form-grid">
                            <div class="form-group">
                                <label>Company Name</label>
                                <input type="text" value="Acme Eye Care" disabled>
                            </div>
                            <div class="form-group">
                                <label>Primary Contact</label>
                                <input type="text" value="John Doe">
                            </div>
                            <div class="form-group">
                                <label>Email</label>
                                <input type="email" value="john@acmeeyecare.com">
                            </div>
                            <div class="form-group">
                                <label>Phone</label>
                                <input type="tel" value="(555) 123-4567">
                            </div>
                        </div>
                    </div>

                    <div class="settings-group">
                        <h3>Preferences</h3>
                        <div class="settings-options">
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                <span>Email me daily reports</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" checked>
                                <span>Alert me when service level drops below target</span>
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox">
                                <span>Enable two-factor authentication</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button class="btn btn-primary">Save Settings</button>
                    </div>
                </div>
            </section>

            <!-- Integrations Section -->
            <section id="integrations" class="content-section">
                <header class="section-header">
                    <h1>Integrations</h1>
                    <p class="section-subtitle">Connect your portal with external services</p>
                </header>

                <div class="integration-tabs">
                    <button class="tab-btn active" onclick="showIntegrationTab('hubspot')">HubSpot</button>
                    <button class="tab-btn" onclick="showIntegrationTab('blandai')">Bland AI</button>
                    <button class="tab-btn" onclick="showIntegrationTab('connect')">Amazon Connect</button>
                </div>

                <!-- HubSpot Integration -->
                <div id="hubspot-tab" class="integration-content active">
                    <div class="integration-header">
                        <div class="integration-status">
                            <h3>HubSpot CRM</h3>
                            <span class="badge success">Connected</span>
                        </div>
                        <button class="btn btn-secondary">Sync Now</button>
                    </div>

                    <div class="integration-grid">
                        <div class="integration-card">
                            <h4>Ticket Management</h4>
                            <div class="integration-stats">
                                <div class="stat-item">
                                    <span>Open Tickets:</span>
                                    <strong>23</strong>
                                </div>
                                <div class="stat-item">
                                    <span>Resolved Today:</span>
                                    <strong>15</strong>
                                </div>
                                <div class="stat-item">
                                    <span>Avg Resolution Time:</span>
                                    <strong>2.5 hours</strong>
                                </div>
                            </div>
                            <button class="btn btn-outline" onclick="showCreateTicket()">Create Ticket from Call</button>
                        </div>

                        <div class="integration-card">
                            <h4>Contact Sync</h4>
                            <div class="sync-status">
                                <p>Last Sync: <strong>10 minutes ago</strong></p>
                                <p>Contacts Synced: <strong>1,234</strong></p>
                                <p>Companies Synced: <strong>156</strong></p>
                            </div>
                            <div class="sync-settings">
                                <label class="checkbox-label">
                                    <input type="checkbox" checked>
                                    <span>Auto-sync every hour</span>
                                </label>
                                <label class="checkbox-label">
                                    <input type="checkbox" checked>
                                    <span>Create contacts from new calls</span>
                                </label>
                            </div>
                        </div>

                        <div class="integration-card">
                            <h4>Invoice Integration</h4>
                            <table class="simple-table">
                                <thead>
                                    <tr>
                                        <th>Invoice</th>
                                        <th>HubSpot Deal</th>
                                        <th>Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>INV-2025-001</td>
                                        <td>Deal #4567</td>
                                        <td><span class="badge warning">Pending</span></td>
                                    </tr>
                                    <tr>
                                        <td>INV-2024-012</td>
                                        <td>Deal #4566</td>
                                        <td><span class="badge success">Closed</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Create Ticket Modal -->
                    <div class="modal" id="create-ticket-modal" style="display: none;">
                        <div class="modal-content">
                            <h3>Create HubSpot Ticket from Call</h3>
                            <form>
                                <div class="form-group">
                                    <label>Select Call</label>
                                    <select>
                                        <option>Call #1247 - John Smith - 01/11/2025 10:45 AM</option>
                                        <option>Call #1246 - Jane Doe - 01/11/2025 10:32 AM</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Ticket Subject</label>
                                    <input type="text" placeholder="Enter ticket subject">
                                </div>
                                <div class="form-group">
                                    <label>Priority</label>
                                    <select>
                                        <option>Low</option>
                                        <option>Medium</option>
                                        <option>High</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Description</label>
                                    <textarea placeholder="Describe the issue..."></textarea>
                                </div>
                                <div class="form-options">
                                    <label class="checkbox-label">
                                        <input type="checkbox" checked>
                                        <span>Attach call recording</span>
                                    </label>
                                    <label class="checkbox-label">
                                        <input type="checkbox" checked>
                                        <span>Include transcript</span>
                                    </label>
                                </div>
                                <div class="form-actions">
                                    <button type="button" class="btn btn-secondary" onclick="closeCreateTicket()">Cancel</button>
                                    <button type="submit" class="btn btn-primary">Create Ticket</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Bland AI Integration -->
                <div id="blandai-tab" class="integration-content" style="display: none;">
                    <div class="integration-header">
                        <div class="integration-status">
                            <h3>Bland AI Voice Agents</h3>
                            <span class="badge success">Active</span>
                        </div>
                        <button class="btn btn-primary">Configure AI Agent</button>
                    </div>

                    <div class="ai-config-grid">
                        <div class="ai-config-card">
                            <h4>After-Hours Configuration</h4>
                            <div class="config-settings">
                                <div class="form-group">
                                    <label>Active Hours</label>
                                    <div class="hours-selector">
                                        <input type="time" value="17:00"> to <input type="time" value="08:00">
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label>Voice Selection</label>
                                    <select>
                                        <option>Professional Female</option>
                                        <option>Professional Male</option>
                                        <option>Friendly Female</option>
                                        <option>Friendly Male</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Greeting Message</label>
                                    <textarea>Thank you for calling. Our office is currently closed...</textarea>
                                </div>
                            </div>
                        </div>

                        <div class="ai-config-card">
                            <h4>FAQ Management</h4>
                            <div class="faq-list">
                                <div class="faq-item">
                                    <strong>Q: What are your hours?</strong>
                                    <p>A: We're open Monday through Friday, 8 AM to 5 PM.</p>
                                    <button class="btn-icon">‚úèÔ∏è</button>
                                </div>
                                <div class="faq-item">
                                    <strong>Q: How do I schedule an appointment?</strong>
                                    <p>A: You can schedule online or leave a message for callback.</p>
                                    <button class="btn-icon">‚úèÔ∏è</button>
                                </div>
                            </div>
                            <button class="btn btn-outline">Add FAQ</button>
                        </div>

                        <div class="ai-config-card">
                            <h4>AI Performance & Costs</h4>
                            <div class="ai-stats">
                                <div class="stat-row">
                                    <span>Calls Handled (This Month):</span>
                                    <strong>342</strong>
                                </div>
                                <div class="stat-row">
                                    <span>Average Call Duration:</span>
                                    <strong>2:15</strong>
                                </div>
                                <div class="stat-row">
                                    <span>Transfer Rate:</span>
                                    <strong>15%</strong>
                                </div>
                                <div class="stat-row">
                                    <span>Monthly Cost:</span>
                                    <strong class="text-warning">$245.67</strong>
                                </div>
                                <div class="stat-row">
                                    <span>Cost per Call:</span>
                                    <strong>$0.72</strong>
                                </div>
                            </div>
                        </div>

                        <div class="ai-config-card">
                            <h4>Routing Rules</h4>
                            <div class="routing-rules">
                                <div class="rule-item">
                                    <span>Emergency Keywords:</span>
                                    <input type="text" value="urgent, emergency, immediate">
                                    <span>‚Üí Transfer to on-call</span>
                                </div>
                                <div class="rule-item">
                                    <span>Appointment Requests:</span>
                                    <span>‚Üí Collect info & create callback</span>
                                </div>
                                <div class="rule-item">
                                    <span>General Inquiries:</span>
                                    <span>‚Üí Answer from FAQ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Amazon Connect Integration -->
                <div id="connect-tab" class="integration-content" style="display: none;">
                    <div class="integration-header">
                        <div class="integration-status">
                            <h3>Amazon Connect</h3>
                            <span class="badge success">Connected</span>
                        </div>
                        <button class="btn btn-secondary">View Instance</button>
                    </div>

                    <div class="connect-dashboard">
                        <div class="connect-card">
                            <h4>Queue Configuration</h4>
                            <table class="simple-table">
                                <thead>
                                    <tr>
                                        <th>Queue Name</th>
                                        <th>Agents</th>
                                        <th>Status</th>
                                        <th>Calls Waiting</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>CVC</td>
                                        <td>5</td>
                                        <td><span class="badge success">Active</span></td>
                                        <td>0</td>
                                    </tr>
                                    <tr>
                                        <td>Limmestone</td>
                                        <td>2</td>
                                        <td><span class="badge success">Active</span></td>
                                        <td>1</td>
                                    </tr>
                                    <tr>
                                        <td>After Hours</td>
                                        <td>0</td>
                                        <td><span class="badge">Inactive</span></td>
                                        <td>0</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="connect-card">
                            <h4>Contact Flows</h4>
                            <div class="flow-list">
                                <div class="flow-item">
                                    <span>Main IVR Flow</span>
                                    <button class="btn-icon">üëÅÔ∏è</button>
                                    <button class="btn-icon">‚úèÔ∏è</button>
                                </div>
                                <div class="flow-item">
                                    <span>After Hours Flow</span>
                                    <button class="btn-icon">üëÅÔ∏è</button>
                                    <button class="btn-icon">‚úèÔ∏è</button>
                                </div>
                                <div class="flow-item">
                                    <span>Holiday Flow</span>
                                    <button class="btn-icon">üëÅÔ∏è</button>
                                    <button class="btn-icon">‚úèÔ∏è</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Advanced Analytics Section -->
            <section id="analytics" class="content-section">
                <header class="section-header">
                    <h1>Advanced Analytics</h1>
                    <div class="header-actions">
                        <button class="btn btn-secondary" onclick="showComparisonModal()">Compare Periods</button>
                        <button class="btn btn-primary">Customize Dashboard</button>
                    </div>
                </header>

                <!-- Comparison Controls -->
                <div class="comparison-controls">
                    <div class="comparison-selector">
                        <label>Compare:</label>
                        <select id="period1">
                            <option>This Week</option>
                            <option>Last Week</option>
                            <option>This Month</option>
                            <option>Last Month</option>
                        </select>
                        <span>vs</span>
                        <select id="period2">
                            <option>Last Week</option>
                            <option>2 Weeks Ago</option>
                            <option>Last Month</option>
                            <option>Last Year</option>
                        </select>
                    </div>
                </div>

                <!-- Comparison Metrics -->
                <div class="comparison-grid">
                    <div class="comparison-card">
                        <h4>Call Volume Comparison</h4>
                        <div class="comparison-chart">
                            <div class="period-data">
                                <span class="period-label">This Week</span>
                                <div class="metric-bar" style="width: 85%">1,247 calls</div>
                            </div>
                            <div class="period-data">
                                <span class="period-label">Last Week</span>
                                <div class="metric-bar secondary" style="width: 75%">1,112 calls</div>
                            </div>
                            <div class="change-indicator positive">+12.1% increase</div>
                        </div>
                    </div>

                    <div class="comparison-card">
                        <h4>Service Level Comparison</h4>
                        <div class="comparison-chart">
                            <div class="period-data">
                                <span class="period-label">This Week</span>
                                <div class="metric-bar" style="width: 92%">92%</div>
                            </div>
                            <div class="period-data">
                                <span class="period-label">Last Week</span>
                                <div class="metric-bar secondary" style="width: 87%">87%</div>
                            </div>
                            <div class="change-indicator positive">+5% improvement</div>
                        </div>
                    </div>

                    <div class="comparison-card">
                        <h4>Average Handle Time</h4>
                        <div class="comparison-chart">
                            <div class="period-data">
                                <span class="period-label">This Week</span>
                                <div class="metric-bar" style="width: 60%">4:32</div>
                            </div>
                            <div class="period-data">
                                <span class="period-label">Last Week</span>
                                <div class="metric-bar secondary" style="width: 50%">3:47</div>
                            </div>
                            <div class="change-indicator negative">+45 seconds</div>
                        </div>
                    </div>
                </div>

                <!-- Custom Dashboard Builder -->
                <div class="dashboard-builder">
                    <h3>Custom Dashboard</h3>
                    <div class="widget-toolbar">
                        <button class="widget-btn" draggable="true">üìä Chart Widget</button>
                        <button class="widget-btn" draggable="true">üìà Line Graph</button>
                        <button class="widget-btn" draggable="true">ü•ß Pie Chart</button>
                        <button class="widget-btn" draggable="true">üìã Table Widget</button>
                        <button class="widget-btn" draggable="true">üî¢ Metric Card</button>
                    </div>
                    <div class="dashboard-canvas">
                        <div class="widget-placeholder">
                            <p>Drag widgets here to build your custom dashboard</p>
                        </div>
                        <div class="sample-widget">
                            <h4>Sample Widget: Call Distribution</h4>
                            <div class="pie-chart-placeholder">
                                <div class="pie-segment" style="background: #2563eb; transform: rotate(0deg) skew(60deg);"></div>
                                <div class="pie-segment" style="background: #10b981; transform: rotate(60deg) skew(30deg);"></div>
                                <div class="pie-segment" style="background: #f59e0b; transform: rotate(90deg) skew(270deg);"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Historical Trends -->
                <div class="historical-trends">
                    <h3>Historical Trends</h3>
                    <div class="trend-cards">
                        <div class="trend-card">
                            <h4>Year-over-Year Growth</h4>
                            <div class="trend-value positive">+34%</div>
                            <div class="trend-chart">
                                <canvas class="sparkline"></canvas>
                            </div>
                        </div>
                        <div class="trend-card">
                            <h4>Seasonal Patterns</h4>
                            <div class="seasonal-data">
                                <div class="season-item">
                                    <span>Q1:</span> <strong>High Volume</strong>
                                </div>
                                <div class="season-item">
                                    <span>Q2:</span> <strong>Normal</strong>
                                </div>
                                <div class="season-item">
                                    <span>Q3:</span> <strong>Low Volume</strong>
                                </div>
                                <div class="season-item">
                                    <span>Q4:</span> <strong>Peak Season</strong>
                                </div>
                            </div>
                        </div>
                        <div class="trend-card">
                            <h4>Client Benchmarking</h4>
                            <div class="benchmark-data">
                                <p>Your Performance vs Industry Average</p>
                                <div class="benchmark-item">
                                    <span>Service Level:</span>
                                    <strong class="text-success">92% (Industry: 85%)</strong>
                                </div>
                                <div class="benchmark-item">
                                    <span>First Call Resolution:</span>
                                    <strong class="text-warning">78% (Industry: 80%)</strong>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scheduled Reports -->
                <div class="scheduled-reports">
                    <h3>Scheduled Reports</h3>
                    <div class="report-scheduler">
                        <table class="data-table">
                            <thead>
                                <tr>
                                    <th>Report Name</th>
                                    <th>Frequency</th>
                                    <th>Recipients</th>
                                    <th>Next Run</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>Daily Performance Summary</td>
                                    <td>Daily at 6:00 AM</td>
                                    <td>john@practice.com, jane@practice.com</td>
                                    <td>Tomorrow 6:00 AM</td>
                                    <td>
                                        <button class="btn-icon">‚úèÔ∏è</button>
                                        <button class="btn-icon">‚è∏Ô∏è</button>
                                        <button class="btn-icon">üóëÔ∏è</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Weekly Agent Scorecard</td>
                                    <td>Weekly on Monday</td>
                                    <td>management@practice.com</td>
                                    <td>Jan 15, 2025</td>
                                    <td>
                                        <button class="btn-icon">‚úèÔ∏è</button>
                                        <button class="btn-icon">‚è∏Ô∏è</button>
                                        <button class="btn-icon">üóëÔ∏è</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <button class="btn btn-primary" onclick="showScheduleReportModal()">Schedule New Report</button>
                    </div>
                </div>
            </section>

            <!-- Automation Dashboard (CSM Only) -->
            <section id="automation" class="content-section">
                <header class="section-header">
                    <h1>Automation Dashboard</h1>
                    <p class="section-subtitle">Monitor and manage automated workflows</p>
                </header>

                <!-- Setup Status Tracker -->
                <div class="automation-tracker">
                    <h3>Recent Client Setups</h3>
                    <div class="setup-timeline">
                        <div class="setup-item">
                            <div class="setup-header">
                                <h4>Acme Eye Care</h4>
                                <span class="setup-date">Created: Jan 11, 2025 10:30 AM</span>
                            </div>
                            <div class="setup-progress">
                                <div class="progress-step completed">
                                    <span class="step-icon">‚úì</span>
                                    <span class="step-label">Company Created</span>
                                    <span class="step-time">10:30 AM</span>
                                </div>
                                <div class="progress-step completed">
                                    <span class="step-icon">‚úì</span>
                                    <span class="step-label">Tech Team Notified</span>
                                    <span class="step-time">10:31 AM</span>
                                </div>
                                <div class="progress-step in-progress">
                                    <span class="step-icon">‚è≥</span>
                                    <span class="step-label">Amazon Connect Setup</span>
                                    <span class="step-time">In Progress</span>
                                </div>
                                <div class="progress-step pending">
                                    <span class="step-icon">‚óã</span>
                                    <span class="step-label">Bland AI Config</span>
                                    <span class="step-time">Pending</span>
                                </div>
                                <div class="progress-step pending">
                                    <span class="step-icon">‚óã</span>
                                    <span class="step-label">Go Live</span>
                                    <span class="step-time">Pending</span>
                                </div>
                            </div>
                            <div class="setup-actions">
                                <button class="btn btn-outline">View Details</button>
                                <button class="btn btn-secondary">Send Reminder</button>
                            </div>
                        </div>

                        <div class="setup-item">
                            <div class="setup-header">
                                <h4>Vision Plus Clinic</h4>
                                <span class="setup-date">Created: Jan 10, 2025 2:15 PM</span>
                            </div>
                            <div class="setup-progress">
                                <div class="progress-step completed">
                                    <span class="step-icon">‚úì</span>
                                    <span class="step-label">Company Created</span>
                                    <span class="step-time">2:15 PM</span>
                                </div>
                                <div class="progress-step completed">
                                    <span class="step-icon">‚úì</span>
                                    <span class="step-label">Tech Team Notified</span>
                                    <span class="step-time">2:16 PM</span>
                                </div>
                                <div class="progress-step completed">
                                    <span class="step-icon">‚úì</span>
                                    <span class="step-label">Amazon Connect Setup</span>
                                    <span class="step-time">3:45 PM</span>
                                </div>
                                <div class="progress-step completed">
                                    <span class="step-icon">‚úì</span>
                                    <span class="step-label">Bland AI Config</span>
                                    <span class="step-time">4:30 PM</span>
                                </div>
                                <div class="progress-step completed">
                                    <span class="step-icon">‚úì</span>
                                    <span class="step-label">Go Live</span>
                                    <span class="step-time">5:00 PM</span>
                                </div>
                            </div>
                            <div class="setup-status success">
                                <span>‚úì Setup Complete - Client is Live!</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Tech Team Notifications -->
                <div class="tech-notifications">
                    <h3>Tech Team Task Queue</h3>
                    <div class="notification-list">
                        <div class="notification-item priority-high">
                            <div class="notification-header">
                                <span class="priority-badge">High Priority</span>
                                <span class="notification-time">10 minutes ago</span>
                            </div>
                            <h4>Amazon Connect Setup Required</h4>
                            <div class="notification-details">
                                <p><strong>Client:</strong> Acme Eye Care</p>
                                <p><strong>Requirements:</strong></p>
                                <ul>
                                    <li>Create queue: "Acme_Main_Support"</li>
                                    <li>Phone number: Preferred area code 555</li>
                                    <li>Hours: Mon-Fri 8:00 AM - 5:00 PM EST</li>
                                    <li>Agents needed: 5</li>
                                    <li>Routing: Skills-based (Appointments, Billing)</li>
                                </ul>
                                <div class="notification-actions">
                                    <button class="btn btn-primary">Start Setup</button>
                                    <button class="btn btn-outline">View Full Details</button>
                                </div>
                            </div>
                        </div>

                        <div class="notification-item priority-medium">
                            <div class="notification-header">
                                <span class="priority-badge medium">Medium Priority</span>
                                <span class="notification-time">2 hours ago</span>
                            </div>
                            <h4>Bland AI Configuration</h4>
                            <div class="notification-details">
                                <p><strong>Client:</strong> Clear View Optometry</p>
                                <p><strong>After-hours requirements:</strong></p>
                                <ul>
                                    <li>Active: 5:00 PM - 8:00 AM</li>
                                    <li>Voice: Professional Female</li>
                                    <li>Transfer emergency calls to on-call</li>
                                </ul>
                                <div class="notification-actions">
                                    <button class="btn btn-secondary">Configure AI</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Automation Metrics -->
                <div class="automation-metrics">
                    <h3>Automation Performance</h3>
                    <div class="metrics-grid">
                        <div class="metric-card">
                            <h4>Setup Time Reduction</h4>
                            <div class="metric-value">-65%</div>
                            <p>Average setup time: 2 hours (was 6 hours)</p>
                        </div>
                        <div class="metric-card">
                            <h4>Automated Notifications</h4>
                            <div class="metric-value">247</div>
                            <p>This month (100% delivery rate)</p>
                        </div>
                        <div class="metric-card">
                            <h4>Manual Interventions</h4>
                            <div class="metric-value">12</div>
                            <p>5% of total setups required manual help</p>
                        </div>
                        <div class="metric-card">
                            <h4>Success Rate</h4>
                            <div class="metric-value">98%</div>
                            <p>First-time setup success</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        function showSection(sectionId) {
            // Hide all sections
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected section
            document.getElementById(sectionId).classList.add('active');
            
            // Update nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            event.target.closest('.nav-link').classList.add('active');
        }

        function closeModal() {
            document.getElementById('call-player').style.display = 'none';
        }

        function showAddUserModal() {
            alert('Add User modal would open here');
        }
        
        function toggleCompanyDetails(companyId) {
            const detailsDiv = document.getElementById(companyId + '-details');
            const row = event.currentTarget;
            
            // Toggle active class
            detailsDiv.classList.toggle('active');
            row.classList.toggle('expanded');
            
            // Close other expanded companies
            document.querySelectorAll('.user-details').forEach(detail => {
                if (detail.id !== companyId + '-details') {
                    detail.classList.remove('active');
                }
            });
            document.querySelectorAll('.company-row').forEach(r => {
                if (r !== row) {
                    r.classList.remove('expanded');
                }
            });
        }

        function showIntegrationTab(tabName) {
            document.querySelectorAll('.integration-content').forEach(content => {
                content.style.display = 'none';
            });
            document.getElementById(tabName + '-tab').style.display = 'block';
            
            document.querySelectorAll('.integration-tabs .tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function showCreateTicket() {
            document.getElementById('create-ticket-modal').style.display = 'flex';
        }

        function closeCreateTicket() {
            document.getElementById('create-ticket-modal').style.display = 'none';
        }

        function showComparisonModal() {
            alert('Comparison settings modal would open here');
        }

        function showScheduleReportModal() {
            alert('Schedule report modal would open here');
        }

        // Simulate login page redirect
        function showLogin() {
            window.location.href = 'login.html';
        }

        // Check for first-time user and show onboarding
        window.addEventListener('load', function() {
            // Apply role-based UI changes
            applyRoleBasedUI();
            
            // Check if URL has a hash and show that section
            if (window.location.hash) {
                const sectionId = window.location.hash.substring(1);
                showSection(sectionId);
            }
        });

        function showOnboarding() {
            // This would trigger the onboarding flow
            window.location.href = 'onboarding.html';
        }
        
        function logout() {
            localStorage.clear();
            window.location.href = 'index.html';
        }
        
        function switchRole() {
            if (confirm('This will take you back to role selection. Continue?')) {
                window.location.href = 'index.html';
            }
        }
        
        function applyRoleBasedUI() {
            const role = localStorage.getItem('demoRole') || 'client-admin';
            const userData = JSON.parse(localStorage.getItem('demoUserData') || '{}');
            
            // Update user info
            document.getElementById('user-name').textContent = userData.name || 'John Doe';
            document.getElementById('user-role').textContent = role.replace('-', ' ').replace(/\b\w/g, l => l.toUpperCase());
            
            // Update avatar initials
            if (userData.name) {
                const initials = userData.name.split(' ').map(n => n[0]).join('');
                document.querySelector('.user-avatar').textContent = initials;
            }
            
            // Hide/show billing views based on role
            if (role === 'admin' || role === 'csm') {
                // Show admin billing view
                document.getElementById('client-billing-summary').style.display = 'none';
                document.getElementById('admin-billing-summary').style.display = 'block';
                document.getElementById('client-billing-view').style.display = 'none';
                document.getElementById('admin-billing-view').style.display = 'flex';
                document.getElementById('client-invoice-list').style.display = 'none';
                document.getElementById('admin-invoice-list').style.display = 'block';
                document.getElementById('billing-title').textContent = 'Client Billing Management';
            } else {
                // Show client billing view
                document.getElementById('client-billing-summary').style.display = 'block';
                document.getElementById('admin-billing-summary').style.display = 'none';
                document.getElementById('client-billing-view').style.display = 'flex';
                document.getElementById('admin-billing-view').style.display = 'none';
                document.getElementById('client-invoice-list').style.display = 'block';
                document.getElementById('admin-invoice-list').style.display = 'none';
                document.getElementById('billing-title').textContent = 'Billing & Invoices';
            }
            
            // Hide/show user management views based on role
            if (role === 'admin' || role === 'csm') {
                // Show companies view for admin/CSM
                document.getElementById('client-users-view').style.display = 'none';
                document.getElementById('admin-companies-view').style.display = 'block';
                document.getElementById('users-title').textContent = 'Company & User Management';
            } else {
                // Show regular users view for clients
                document.getElementById('client-users-view').style.display = 'block';
                document.getElementById('admin-companies-view').style.display = 'none';
                document.getElementById('users-title').textContent = 'User Management';
            }
            
            // Handle agent-specific call visibility
            if (role === 'agent') {
                // Agents see only their own calls
                document.getElementById('all-calls').style.display = 'none';
                document.getElementById('agent-calls').style.display = 'table-row-group';
                document.getElementById('agent-filter').style.display = 'none';
                document.getElementById('calls-title').textContent = 'My Calls';
                // Hide agent column for agents (redundant)
                document.querySelectorAll('.agent-column').forEach(el => el.style.display = 'none');
            } else {
                // Others see all calls
                document.getElementById('all-calls').style.display = 'table-row-group';
                document.getElementById('agent-calls').style.display = 'none';
                document.getElementById('agent-filter').style.display = 'inline-block';
                document.getElementById('calls-title').textContent = 'Call Management';
            }
            
            // Show menu items based on role (all are hidden by CSS by default)
            if (role === 'client-admin') {
                // Client Admin: Show financial, users, settings
                document.querySelectorAll('.financial-access').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.user-management').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.settings-access').forEach(el => el.style.display = 'block');
            } else if (role === 'client-user') {
                // Client User: Most restricted - show nothing extra
            } else if (role === 'agent') {
                // Agent: Very limited - show nothing extra
            } else if (role === 'supervisor') {
                // Supervisor: Show supervisor and internal analytics
                document.querySelectorAll('.supervisor-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.internal-only').forEach(el => el.style.display = 'block');
            } else if (role === 'csm') {
                // CSM: Show CSM, supervisor, internal, financial, users, settings
                document.querySelectorAll('.csm-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.supervisor-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.internal-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.financial-access').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.user-management').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.settings-access').forEach(el => el.style.display = 'block');
            } else if (role === 'admin') {
                // Admin: Show everything
                document.querySelectorAll('.admin-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.csm-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.supervisor-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.internal-only').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.financial-access').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.user-management').forEach(el => el.style.display = 'block');
                document.querySelectorAll('.settings-access').forEach(el => el.style.display = 'block');
            }
        }
        
        function createSupportTicket(callId) {
            // Show ticket creation modal
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            modal.innerHTML = `
                <div class="modal-content">
                    <h3>Create Support Ticket for Call #${callId}</h3>
                    <form onsubmit="submitTicket(event, '${callId}')">
                        <div class="form-group">
                            <label>Issue Description</label>
                            <textarea required placeholder="Describe the issue with this call..."></textarea>
                        </div>
                        <div class="form-group">
                            <label>Priority</label>
                            <select>
                                <option>High - Call Quality Issue</option>
                                <option>Medium - General Issue</option>
                                <option>Low - Question</option>
                            </select>
                        </div>
                        <div class="form-actions">
                            <button type="button" class="btn btn-secondary" onclick="this.closest('.modal').remove()">Cancel</button>
                            <button type="submit" class="btn btn-primary">Create Ticket</button>
                        </div>
                    </form>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function submitTicket(event, callId) {
            event.preventDefault();
            alert(`Ticket created for Call #${callId}. You will receive a confirmation email.`);
            event.target.closest('.modal').remove();
        }
        
        function showTranscript(callId, agentName, dateTime, outcome) {
            // Sample transcripts for demo
            const transcripts = {
                '1247': {
                    conversation: [
                        { speaker: 'Agent', text: 'Good morning, thank you for calling Acme Eye Care. This is Sarah, how can I help you today?' },
                        { speaker: 'Patient', text: 'Hi Sarah, I need to schedule an eye exam. It\'s been over a year since my last one.' },
                        { speaker: 'Agent', text: 'I\'d be happy to help you schedule that appointment. Let me check our availability. Are you a current patient with us?' },
                        { speaker: 'Patient', text: 'Yes, I am. My name is John Smith.' },
                        { speaker: 'Agent', text: 'Perfect, Mr. Smith. I see your record here. Your last exam was indeed 14 months ago with Dr. Johnson. Would you like to see Dr. Johnson again?' },
                        { speaker: 'Patient', text: 'Yes, that would be great. He\'s been my doctor for years.' },
                        { speaker: 'Agent', text: 'Excellent choice. Dr. Johnson has availability next Tuesday at 2 PM or Thursday at 10 AM. Which would work better for you?' },
                        { speaker: 'Patient', text: 'Thursday at 10 AM works perfectly.' },
                        { speaker: 'Agent', text: 'Great! I\'ve scheduled you for Thursday, January 18th at 10 AM with Dr. Johnson. You\'ll receive a confirmation text and email shortly.' },
                        { speaker: 'Patient', text: 'Thank you so much, Sarah. You\'ve been very helpful.' },
                        { speaker: 'Agent', text: 'You\'re very welcome, Mr. Smith! Is there anything else I can help you with today?' },
                        { speaker: 'Patient', text: 'No, that\'s all. Have a great day!' },
                        { speaker: 'Agent', text: 'You too! We\'ll see you next Thursday. Goodbye!' }
                    ],
                    summary: 'Patient called to schedule annual eye exam. Successfully booked appointment with Dr. Johnson for Thursday, January 18th at 10 AM. Patient was satisfied with the service.',
                    sopScore: 92,
                    wowScore: 88,
                    appointmentMade: true
                },
                '1246': {
                    conversation: [
                        { speaker: 'Agent', text: 'Good morning, thank you for calling Acme Eye Care. This is Mike, how can I assist you?' },
                        { speaker: 'System', text: '[No answer - call went to voicemail after 3 rings]' },
                        { speaker: 'Agent', text: 'Hello, this is Mike from Acme Eye Care returning your call. We noticed you tried to reach us earlier today.' },
                        { speaker: 'Agent', text: 'Please give us a call back at 555-0100 when you have a moment. We\'re here Monday through Friday, 8 AM to 5 PM.' },
                        { speaker: 'Agent', text: 'If you\'d like to schedule an appointment, you can also do so online at our website. Thank you and have a great day!' }
                    ],
                    summary: 'Attempted callback to patient. No answer, left voicemail with callback information and online scheduling option.',
                    sopScore: 78,
                    wowScore: 75,
                    appointmentMade: false
                },
                '1245': {
                    conversation: [
                        { speaker: 'Agent', text: 'Good morning, Acme Eye Care, this is Emma speaking. How may I help you today?' },
                        { speaker: 'Patient', text: 'Hi Emma, I\'m having some issues with my contact lenses and I think I need to see the doctor soon.' },
                        { speaker: 'Agent', text: 'I\'m sorry to hear you\'re having issues with your contacts. Can you tell me a bit more about what\'s happening?' },
                        { speaker: 'Patient', text: 'They\'ve been really uncomfortable lately, and my eyes are red and irritated.' },
                        { speaker: 'Agent', text: 'That does sound uncomfortable. For issues like this, we want to get you in as soon as possible. Let me check our urgent appointment slots.' },
                        { speaker: 'Patient', text: 'Thank you, I really appreciate it.' },
                        { speaker: 'Agent', text: 'I have an opening this afternoon at 3:30 PM with Dr. Martinez, or tomorrow morning at 9 AM with Dr. Johnson. Which would you prefer?' },
                        { speaker: 'Patient', text: 'This afternoon would be perfect. I can make 3:30.' },
                        { speaker: 'Agent', text: 'Excellent. I\'ve booked you for today at 3:30 PM with Dr. Martinez. Given your symptoms, please bring your current contacts and the packaging if you have it.' },
                        { speaker: 'Patient', text: 'I will. Should I stop wearing them until the appointment?' },
                        { speaker: 'Agent', text: 'Yes, that\'s a great question. I would recommend switching to your glasses if you have them, just to give your eyes a rest.' },
                        { speaker: 'Patient', text: 'Okay, I\'ll do that. Thank you so much for fitting me in today.' },
                        { speaker: 'Agent', text: 'You\'re very welcome! We\'ll see you at 3:30. If your symptoms worsen before then, please don\'t hesitate to call us back.' }
                    ],
                    summary: 'Patient called with urgent contact lens discomfort. Successfully scheduled same-day appointment with Dr. Martinez at 3:30 PM. Provided care instructions.',
                    sopScore: 95,
                    wowScore: 93,
                    appointmentMade: true
                }
            };
            
            const transcript = transcripts[callId] || transcripts['1247'];
            
            // Create and show modal
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            modal.style.alignItems = 'center';
            modal.style.justifyContent = 'center';
            modal.innerHTML = `
                <div class="modal-content" style="max-width: 800px; max-height: 80vh; overflow-y: auto;">
                    <h3>Call Transcript - #${callId}</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
                        <div>
                            <strong>Agent:</strong> ${agentName}<br>
                            <strong>Date/Time:</strong> ${dateTime}
                        </div>
                        <div>
                            <strong>Outcome:</strong> ${outcome}<br>
                            <strong>Duration:</strong> ${callId === '1247' ? '5:23' : callId === '1246' ? '3:45' : '7:12'}
                        </div>
                    </div>
                    
                    <div class="ai-scores" style="margin-bottom: 20px;">
                        <div class="score-item">
                            <span>SOP Score:</span> <strong>${transcript.sopScore}%</strong>
                        </div>
                        <div class="score-item">
                            <span>WOW Score:</span> <strong>${transcript.wowScore}%</strong>
                        </div>
                        <div class="score-item">
                            <span>Appointment:</span> <strong>${transcript.appointmentMade ? 'Yes' : 'No'}</strong>
                        </div>
                    </div>
                    
                    <div style="background: var(--background); padding: 16px; border-radius: 8px; margin-bottom: 20px;">
                        <h4 style="margin-bottom: 12px;">Call Summary</h4>
                        <p style="margin: 0;">${transcript.summary}</p>
                    </div>
                    
                    <div class="transcript-box">
                        <h4>Full Transcript</h4>
                        <div class="transcript-content" style="max-height: 400px; overflow-y: auto;">
                            ${transcript.conversation.map(line => `
                                <div style="margin-bottom: 12px; ${line.speaker === 'System' ? 'font-style: italic; color: var(--text-secondary);' : ''}">
                                    <strong>${line.speaker}:</strong> ${line.text}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="form-actions" style="margin-top: 24px;">
                        <button class="btn btn-secondary" onclick="this.closest('.modal').remove()">Close</button>
                        <button class="btn btn-primary" onclick="downloadTranscript('${callId}')">Download Transcript</button>
                        <button class="btn btn-primary" onclick="createSupportTicket('${callId}'); this.closest('.modal').remove();">Report Issue</button>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }
        
        function downloadTranscript(callId) {
            alert(`Downloading transcript for Call #${callId}...`);
        }
        
        // Toggle submetrics expansion
        function toggleSubmetrics(button) {
            const metricCard = button.closest('.metric-card');
            const submetrics = metricCard.querySelector('.submetrics');
            
            if (submetrics.style.display === 'none') {
                submetrics.style.display = 'block';
                button.textContent = '‚ñ≤';
            } else {
                submetrics.style.display = 'none';
                button.textContent = '‚ñº';
            }
        }
        
        // Handle filter checkboxes
        document.addEventListener('DOMContentLoaded', function() {
            // Handle "All" checkbox behavior for each filter group
            const filterGroups = ['client-filters', 'agent-filters', 'queue-filters'];
            
            filterGroups.forEach(groupId => {
                const group = document.getElementById(groupId);
                if (group) {
                    const checkboxes = group.querySelectorAll('input[type="checkbox"]');
                    const allCheckbox = group.querySelector('input[value="all"]');
                    
                    checkboxes.forEach(checkbox => {
                        checkbox.addEventListener('change', function() {
                            if (this.value === 'all' && this.checked) {
                                // If "All" is checked, uncheck all others
                                checkboxes.forEach(cb => {
                                    if (cb !== this) cb.checked = false;
                                });
                            } else if (this.value !== 'all' && this.checked) {
                                // If any specific item is checked, uncheck "All"
                                if (allCheckbox) allCheckbox.checked = false;
                            }
                            
                            // If nothing is checked, check "All"
                            const anyChecked = Array.from(checkboxes).some(cb => cb.checked);
                            if (!anyChecked && allCheckbox) {
                                allCheckbox.checked = true;
                            }
                            
                            // Update dashboard data based on filters (placeholder for actual implementation)
                            updateDashboardData();
                        });
                    });
                }
            });
        });
        
        // Placeholder function to update dashboard data based on filters
        function updateDashboardData() {
            console.log('Updating dashboard data based on selected filters...');
            // This would typically make an API call to fetch filtered data
            // and update the metric values accordingly
        }
    </script>
</body>
</html>
